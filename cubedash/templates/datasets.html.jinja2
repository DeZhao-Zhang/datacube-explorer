{% extends "layout.html.jinja2" %}

{% block title %}Datasets{% endblock %}
{% block head %}
    {{ super() }}
    <style type="text/css">
        .data-table {
            margin: 15px 0;
        }

        .data-table td, .data-table th {
            padding: 15px;
            text-align: left;
        }

        .query-param {
            padding-right: 5px;
            display: block;
        }

        .query-param > .key {
            display: inline-block;
            font-weight: bold;
            min-width: 80px;
        }
    </style>
{% endblock %}

{% block content %}
    <div class="panel">
        {% for key in query_params %}
            <div class="query-param">
                <span class="key">{{ key }}:</span>
                <span class="value">{{ query_params[key] | query_value }}</span>
            </div>
        {% endfor %}
    </div>
    <html>
    <table class="data-table">
        <thead>
        <th>Time</th>
        <th>Type</th>
        <th>Dataset</th>
        </thead>
        {% for dataset in datasets %}
            <tr>
                <td>{{ dataset.center_time | strftime }}</td>
                <td>{{ dataset.type.name }}</td>
                <td><a href='/datasets/{{ dataset.id }}'>{{ dataset.metadata.label }}</a></td>
            </tr>
        {% endfor %}
    </table>
    </html>
{% endblock %}


{% block footer %}
    <script type="application/javascript">
        $('#select-product').change(function () {
            var product = $('#select-product :selected').val();
            // TODO: Other query params?
            window.location.href = '/datasets?product=' + product;
        });
    </script>
{% endblock %}